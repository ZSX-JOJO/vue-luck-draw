{"version":3,"file":"dev.js","sources":["../node_modules/tslib/tslib.es6.js","../src/utils/polyfill.js","../src/utils/index.ts","../src/observer/dep.ts","../src/observer/utils.ts","../src/observer/array.ts","../src/observer/index.ts","../src/observer/watcher.ts","../src/lib/lucky.ts","../src/utils/math.ts","../src/utils/tween.ts","../src/lib/wheel.ts","../src/lib/grid.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","/**\r\n * 由于部分低版本下的某些 app 可能会缺少某些原型方法, 这里增加兼容\r\n */\r\n\r\n// vivo x7 下网易云游戏 app 缺少 includes 方法\r\nif (!String.prototype.includes) {\r\n  String.prototype.includes = function(search, start) {\r\n    'use strict';\r\n    if (typeof start !== 'number') {\r\n      start = 0;\r\n    }\r\n    if (start + search.length > this.length) {\r\n      return false;\r\n    } else {\r\n      return this.indexOf(search, start) !== -1;\r\n    }\r\n  };\r\n}\r\n\r\n// vivo x7 下网易云游戏 app 缺少 find 方法\r\nif (!Array.prototype.find) {\r\n  Object.defineProperty(Array.prototype, 'find', {\r\n    value: function(predicate) {\r\n     // 1. Let O be ? ToObject(this value).\r\n      if (this == null) {\r\n        throw new TypeError('\"this\" is null or not defined');\r\n      }\r\n      var o = Object(this);\r\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\r\n      var len = o.length >>> 0;\r\n      // 3. If IsCallable(predicate) is false, throw a TypeError exception.\r\n      if (typeof predicate !== 'function') {\r\n        throw new TypeError('predicate must be a function');\r\n      }\r\n      // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n      var thisArg = arguments[1];\r\n      // 5. Let k be 0.\r\n      var k = 0;\r\n      // 6. Repeat, while k < len\r\n      while (k < len) {\r\n        // a. Let Pk be ! ToString(k).\r\n        // b. Let kValue be ? Get(O, Pk).\r\n        // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\r\n        // d. If testResult is true, return kValue.\r\n        var kValue = o[k];\r\n        if (predicate.call(thisArg, kValue, k, o)) {\r\n          return kValue;\r\n        }\r\n        // e. Increase k by 1.\r\n        k++;\r\n      }\r\n      // 7. Return undefined.\r\n      return void 0;\r\n    }\r\n  });\r\n}\r\n","/**\r\n * 判断是否是期望的类型\r\n * @param { any } param 将要判断的变量\r\n * @param { ...string } types 期望的类型\r\n * @return { boolean } 返回期望是否正确\r\n */\r\nexport const isExpectType = (param: any, ...types: string[]): boolean => {\r\n  return types.some(type => Object.prototype.toString.call(param).slice(8, -1).toLowerCase() === type)\r\n}\r\n\r\n/**\r\n * 移除\\n\r\n * @param { string } str 将要处理的字符串\r\n * @return { string } 返回新的字符串\r\n */\r\nexport const removeEnter = (str: string): string => {\r\n  return [].filter.call(str, s => s !== '\\n').join('')\r\n}\r\n\r\n/**\r\n * 把任何数据类型转成数字\r\n * @param num \r\n */\r\nexport const getNumber = (num: any): number => {\r\n  if (num === null) return 0\r\n  if (typeof num === 'object') return NaN\r\n  if (typeof num === 'number') return num\r\n  if (typeof num === 'string') {\r\n    if (num[num.length - 1] === '%') {\r\n      return Number(num.slice(0, -1)) / 100\r\n    }\r\n    return Number(num)\r\n  }\r\n  return NaN\r\n}\r\n\r\n/**\r\n * 判断颜色是否有效 (透明色 === 无效)\r\n * @param color 颜色\r\n */\r\nexport const hasBackground = (color: string | undefined | null): boolean => {\r\n  if (typeof color !== 'string') return false\r\n  color = color.toLocaleLowerCase().trim()\r\n  if (color === 'transparent') return false\r\n  if (/^rgba/.test(color)) {\r\n    const alpha = /([^\\s,]+)\\)$/.exec(color)\r\n    if (getNumber(alpha) === 0) return false\r\n  }\r\n  return true\r\n}\r\n\r\n/**\r\n * 通过padding计算\r\n * @return { object } block 边框信息\r\n */\r\nexport const computePadding = (\r\n  block: { padding?: string }\r\n): [number, number, number, number] => {\r\n  let padding = block.padding?.replace(/px/g, '').split(' ').map(n => ~~n) || [0],\r\n    paddingTop = 0,\r\n    paddingBottom = 0,\r\n    paddingLeft = 0,\r\n    paddingRight = 0\r\n  switch (padding.length) {\r\n    case 1:\r\n      paddingTop = paddingBottom = paddingLeft = paddingRight = padding[0]\r\n      break\r\n    case 2:\r\n      paddingTop = paddingBottom = padding[0]\r\n      paddingLeft = paddingRight = padding[1]\r\n      break\r\n    case 3:\r\n      paddingTop = padding[0]\r\n      paddingLeft = paddingRight = padding[1]\r\n      paddingBottom = padding[2]\r\n      break\r\n    default:\r\n      paddingTop = padding[0]\r\n      paddingBottom = padding[1]\r\n      paddingLeft = padding[2]\r\n      paddingRight = padding[3]\r\n  }\r\n  // 检查是否单独传入值, 并且不是0\r\n  const res = { paddingTop, paddingBottom, paddingLeft, paddingRight }\r\n  for (let key in res) {\r\n    // 是否含有这个属性, 并且是数字或字符串\r\n    res[key] = Object.prototype.hasOwnProperty.call(block, key) && isExpectType(block[key], 'string', 'number')\r\n      ? ~~String(block[key]).replace(/px/g, '')\r\n      : res[key]\r\n  }\r\n  return [paddingTop, paddingBottom, paddingLeft, paddingRight]\r\n}\r\n","import Watcher from './watcher'\r\n\r\nexport default class Dep {\r\n  static target: Watcher | null\r\n  private subs: Array<Watcher>\r\n\r\n  /**\r\n   * 订阅中心构造器\r\n   */\r\n  constructor () {\r\n    this.subs = []\r\n  }\r\n\r\n  /**\r\n   * 收集依赖\r\n   * @param {*} sub \r\n   */\r\n  public addSub (sub: Watcher) {\r\n    // 此处临时使用includes防重复添加\r\n    if (!this.subs.includes(sub)) {\r\n      this.subs.push(sub)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 派发更新\r\n   */\r\n  public notify () {\r\n    this.subs.forEach(sub => {\r\n      sub.update()\r\n    })\r\n  }\r\n}\r\n","\r\nimport { isExpectType } from '../utils'\r\n\r\nexport const hasProto = '__proto__' in {}\r\n\r\nexport function def (obj: object, key: string | number, val: any, enumerable?: boolean) {\r\n  Object.defineProperty(obj, key, {\r\n    value: val,\r\n    enumerable: !!enumerable,\r\n    writable: true,\r\n    configurable: true\r\n  })\r\n}\r\n\r\nexport function parsePath (path: string) {\r\n  path += '.'\r\n  let segments: string[] = [], segment = ''\r\n  for (let i = 0; i < path.length; i++) {\r\n    let curr = path[i]\r\n    if (/\\[|\\./.test(curr)) {\r\n      segments.push(segment)\r\n      segment = ''\r\n    } else if (/\\W/.test(curr)) {\r\n      continue\r\n    } else {\r\n      segment += curr\r\n    }\r\n  }\r\n  return function (data: object | any[]) {\r\n    return segments.reduce((data, key) => {\r\n      return data[key]\r\n    }, data)\r\n  }\r\n}\r\n\r\nexport function traverse (value: any) {\r\n  // const seenObjects = new Set()\r\n  const dfs = (data: any) => {\r\n    if (!isExpectType(data, 'array', 'object')) return\r\n    Object.keys(data).forEach(key => {\r\n      const value = data[key]\r\n      dfs(value)\r\n    })\r\n  }\r\n  dfs(value)\r\n  // seenObjects.clear()\r\n}","/**\r\n * 重写数组的原型方法\r\n */\r\nconst oldArrayProto = Array.prototype\r\nconst newArrayProto = Object.create(oldArrayProto)\r\nconst methods = ['push', 'pop', 'shift', 'unshift', 'sort', 'splice', 'reverse']\r\nmethods.forEach(method => {\r\n  newArrayProto[method] = function (...args: any[]) {\r\n    const res = oldArrayProto[method].apply(this, args)\r\n    const luckyOb = this['__luckyOb__']\r\n    if (['push', 'unshift', 'splice'].includes(method)) luckyOb.walk(this)\r\n    luckyOb.dep.notify()\r\n    return res\r\n  }\r\n})\r\n\r\nexport { newArrayProto }\r\n","import Dep from './dep'\r\nimport { hasProto, def } from './utils'\r\nimport { newArrayProto } from './array'\r\n\r\nexport default class Observer {\r\n  value: any\r\n  dep: Dep\r\n\r\n  /**\r\n   * 观察者构造器\r\n   * @param value \r\n   */\r\n  constructor (value: any) {\r\n    // this.value = value\r\n    this.dep = new Dep()\r\n    // 将响应式对象代理到当前value上面, 并且将当前的enumerable设置为false\r\n    def(value, '__luckyOb__', this)\r\n    if (Array.isArray(value)) { // 如果是数组, 则重写原型方法\r\n      if (hasProto) {\r\n        value['__proto__'] = newArrayProto\r\n      } else {\r\n        Object.getOwnPropertyNames(newArrayProto).forEach(key => {\r\n          def(value, key, newArrayProto[key])\r\n        })\r\n      }\r\n    }\r\n    this.walk(value)\r\n  }\r\n\r\n  walk (data: object | any[]) {\r\n    Object.keys(data).forEach(key => {\r\n      defineReactive(data, key, data[key])\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * 处理响应式\r\n * @param { Object | Array } data\r\n */\r\nexport function observe (data: any): Observer | void {\r\n  if (!data || typeof data !== 'object') return\r\n  let luckyOb: Observer | void\r\n  if ('__luckyOb__' in data) {\r\n    luckyOb = data['__luckyOb__']\r\n  } else {\r\n    luckyOb = new Observer(data)\r\n  }\r\n  return luckyOb\r\n}\r\n\r\n/**\r\n * 重写 setter / getter\r\n * @param {*} data \r\n * @param {*} key \r\n * @param {*} val \r\n */\r\nexport function defineReactive (data: any, key: string | number, val: any) {\r\n  const dep = new Dep()\r\n  const property = Object.getOwnPropertyDescriptor(data, key)\r\n  if (property && property.configurable === false) {\r\n    return\r\n  }\r\n  const getter = property && property.get\r\n  const setter = property && property.set\r\n  if ((!getter || setter) && arguments.length === 2) {\r\n    val = data[key]\r\n  }\r\n  let childOb = observe(val)\r\n  Object.defineProperty(data, key, {\r\n    get: () => {\r\n      const value = getter ? getter.call(data) : val\r\n      if (Dep.target) {\r\n        dep.addSub(Dep.target)\r\n        if (childOb) {\r\n          childOb.dep.addSub(Dep.target)\r\n        }\r\n      }\r\n      return value\r\n    },\r\n    set: (newVal) => {\r\n      if (newVal === val) return\r\n      val = newVal\r\n      if (getter && !setter) return\r\n      if (setter) {\r\n        setter.call(data, newVal)\r\n      } else {\r\n        val = newVal\r\n      }\r\n      childOb = observe(newVal)\r\n      dep.notify()\r\n    }\r\n  })\r\n}\r\n","import Lucky from '../lib/lucky'\r\nimport Dep from './dep'\r\nimport { parsePath, traverse } from './utils'\r\n\r\nexport interface WatchOptType {\r\n  handler?: () => Function\r\n  immediate?: boolean\r\n  deep?: boolean\r\n}\r\n\r\nlet uid = 0\r\nexport default class Watcher {\r\n  id: number\r\n  $lucky: Lucky\r\n  expr: string | Function\r\n  cb: Function\r\n  deep: boolean\r\n  getter: Function\r\n  value: any\r\n\r\n  /**\r\n   * 观察者构造器\r\n   * @param {*} $lucky \r\n   * @param {*} expr \r\n   * @param {*} cb \r\n   */\r\n  constructor ($lucky: Lucky, expr: string | Function, cb: Function, options: WatchOptType = {}) {\r\n    this.id = uid++\r\n    this.$lucky = $lucky\r\n    this.expr = expr\r\n    this.deep = !!options.deep\r\n    if (typeof expr === 'function') {\r\n      this.getter = expr\r\n    } else {\r\n      this.getter = parsePath(expr)\r\n    }\r\n    this.cb = cb\r\n    this.value = this.get()\r\n  }\r\n\r\n  /**\r\n   * 根据表达式获取新值\r\n   */\r\n  get () {\r\n    Dep.target = this\r\n    const value = this.getter.call(this.$lucky, this.$lucky)\r\n    // 处理深度监听\r\n    if (this.deep) {\r\n      traverse(value)\r\n    }\r\n    Dep.target = null\r\n    return value\r\n  }\r\n\r\n  /**\r\n   * 触发 watcher 更新\r\n   */\r\n  update () {\r\n    // get获取新值\r\n    const newVal = this.get()\r\n    // 读取之前存储的旧值\r\n    const oldVal = this.value\r\n    this.value = newVal\r\n    // 触发 watch 回调\r\n    this.cb.call(this.$lucky, newVal, oldVal)\r\n  }\r\n}\r\n","import '../utils/polyfill'\r\nimport { isExpectType } from '../utils/index'\r\nimport { name, version } from '../../package.json'\r\nimport { ConfigType, ImgType, UniImageType } from '../types/index'\r\nimport { defineReactive } from '../observer'\r\nimport Watcher, { WatchOptType } from '../observer/watcher'\r\n\r\nexport default class Lucky {\r\n  protected readonly config: ConfigType\r\n  protected readonly ctx: CanvasRenderingContext2D\r\n  protected htmlFontSize: number = 16\r\n  protected rAF: Function = function () {}\r\n  protected boxWidth: number = 0\r\n  protected boxHeight: number = 0\r\n\r\n  /**\r\n   * 公共构造器\r\n   * @param config\r\n   */\r\n  constructor (config: string | HTMLDivElement | ConfigType) {\r\n    // 先初始化 fontSize 以防后面有 rem 单位\r\n    this.setHTMLFontSize()\r\n    /* eslint-disable */\r\n    // 兼容代码开始: 为了处理 v1.0.6 版本在这里传入了一个 dom\r\n    if (typeof config === 'string') config = { el: config } as ConfigType\r\n    else if (config.nodeType === 1) config = { el: '', divElement: config } as ConfigType\r\n    config = config as ConfigType\r\n    /* eslint-enable */\r\n    this.config = config\r\n    // 拿到 config 即可设置 dpr\r\n    this.setDpr()\r\n    // 初始化 window 方法\r\n    this.initWindowFunction()\r\n    if (!config.flag) config.flag = 'WEB'\r\n    if (!Object.prototype.hasOwnProperty.call(config, 'ob')) config.ob = true\r\n    if (config.el) config.divElement = document.querySelector(config.el) as HTMLDivElement\r\n    let boxWidth = 0, boxHeight = 0\r\n    // 如果存在父盒子, 就创建canvas标签\r\n    if (config.divElement) {\r\n      // 无论盒子内有没有canvas都执行覆盖逻辑\r\n      config.canvasElement = document.createElement('canvas')\r\n      config.divElement.appendChild(config.canvasElement)\r\n    }\r\n    // 初始化宽高\r\n    this.resetWidthAndHeight()\r\n    // 获取 canvas 上下文\r\n    if (config.canvasElement) {\r\n      config.ctx = config.canvasElement.getContext('2d')!\r\n      // 添加版本信息到标签上, 方便定位版本问题\r\n      config.canvasElement.setAttribute('package', `${name}@${version}`)\r\n      config.canvasElement.addEventListener('click', e => this.handleClick(e))\r\n      config.canvasElement.addEventListener('mousemove', e => this.handleMouseMove(e))\r\n      config.canvasElement.addEventListener('mousedown', e => this.handleMouseDown(e))\r\n      config.canvasElement.addEventListener('mouseup', e => this.handleMouseUp(e))\r\n    }\r\n    this.ctx = config.ctx as CanvasRenderingContext2D\r\n    // 如果最后得不到 canvas 上下文那就无法进行绘制\r\n    if (!config.ctx) {\r\n      console.error('无法获取到 CanvasContext2D')\r\n      return\r\n    }\r\n    if (!this.boxWidth || !this.boxHeight) {\r\n      console.error('无法获取到宽度或高度')\r\n      return\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 初始化方法\r\n   */\r\n  public init (willUpdateImgs?: object) {\r\n    this.setDpr()\r\n    this.setHTMLFontSize()\r\n    this.resetWidthAndHeight()\r\n    this.zoomCanvas()\r\n  }\r\n\r\n  /**\r\n   * 鼠标点击事件\r\n   * @param e 事件参数\r\n   */\r\n  protected handleClick (e: MouseEvent): void {}\r\n\r\n  /**\r\n   * 鼠标按下事件\r\n   * @param e 事件参数\r\n   */\r\n  protected handleMouseDown (e: MouseEvent): void {}\r\n\r\n  /**\r\n   * 鼠标抬起事件\r\n   * @param e 事件参数\r\n   */\r\n  protected handleMouseUp (e: MouseEvent): void {}\r\n\r\n  /**\r\n   * 鼠标移动事件\r\n   * @param e 事件参数\r\n   */\r\n  protected handleMouseMove (e: MouseEvent): void {}\r\n\r\n  /**\r\n   * 换算坐标\r\n   */\r\n  protected conversionAxis (x: number, y: number): [number, number] {\r\n    return [0, 0]\r\n  }\r\n\r\n  /**\r\n   * 设备像素比\r\n   * window 环境下自动获取, 其余环境手动传入\r\n   */\r\n  protected setDpr (): void {\r\n    const { config } = this\r\n    if (config.dpr) {\r\n      // 优先使用 config 传入的 dpr\r\n    } else if (window) {\r\n      (window as any).dpr = config.dpr = window.devicePixelRatio || 1\r\n    } else if (!config.dpr) {\r\n      console.error(config, '未传入 dpr 可能会导致绘制异常')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 根标签的字体大小\r\n   */\r\n  protected setHTMLFontSize (): void {\r\n    if (!window) return\r\n    this.htmlFontSize = +window.getComputedStyle(document.documentElement).fontSize.slice(0, -2)\r\n  }\r\n\r\n  /**\r\n   * 重置盒子和canvas的宽高\r\n   */\r\n  private resetWidthAndHeight (): void {\r\n    const { config } = this\r\n    // 如果是浏览器环境并且存在盒子\r\n    let boxWidth = 0, boxHeight = 0\r\n    if (config.divElement) {\r\n      boxWidth = config.divElement.offsetWidth\r\n      boxHeight = config.divElement.offsetHeight\r\n    }\r\n    // 如果 config 上面没有宽高, 就从 style 上面取\r\n    this.boxWidth = this.getLength(config.width) || boxWidth\r\n    this.boxHeight = this.getLength(config.height) || boxHeight\r\n    // 重新把宽高赋给盒子\r\n    if (config.divElement) {\r\n      config.divElement.style.overflow = 'hidden'\r\n      config.divElement.style.width = this.boxWidth + 'px'\r\n      config.divElement.style.height = this.boxHeight + 'px'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 从 window 对象上获取一些方法\r\n   */\r\n  private initWindowFunction (): void {\r\n    const { config } = this\r\n    if (window) {\r\n      this.rAF = (function () {\r\n        return window.requestAnimationFrame ||\r\n          window.webkitRequestAnimationFrame ||\r\n          window['mozRequestAnimationFrame'] ||\r\n          function (callback) {\r\n            window.setTimeout(callback, 1000 / 60)\r\n          }\r\n      })()\r\n      config.setTimeout = window.setTimeout\r\n      config.setInterval = window.setInterval\r\n      config.clearTimeout = window.clearTimeout\r\n      config.clearInterval = window.clearInterval\r\n      return\r\n    }\r\n    if (config.rAF) {\r\n      // 优先使用帧动画\r\n      this.rAF = config.rAF\r\n    } else if (config.setTimeout) {\r\n      // 其次使用定时器\r\n      const timeout = config.setTimeout\r\n      this.rAF = (callback: Function): number => timeout(callback, 16.7)\r\n    } else {\r\n      // 如果config里面没有提供, 那就假设全局方法存在setTimeout\r\n      this.rAF = (callback: Function): number => setTimeout(callback, 16.7)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 根据 dpr 缩放 canvas 并处理位移\r\n   */\r\n  protected zoomCanvas (): void {\r\n    const { config, ctx } = this\r\n    const { canvasElement, dpr } = config\r\n    const [width, height] = [this.boxWidth * dpr, this.boxHeight * dpr]\r\n    const compute = (len: number) => (len * dpr - len) / (len * dpr) * (dpr / 2) * 100\r\n    if (!canvasElement) return\r\n    canvasElement.width = width\r\n    canvasElement.height = height\r\n    canvasElement.style.width = `${width}px`\r\n    canvasElement.style.height = `${height}px`\r\n    canvasElement.style.transform = `scale(${1 / dpr}) translate(${-compute(width)}%, ${-compute(height)}%)`\r\n    ctx.scale(dpr, dpr)\r\n  }\r\n\r\n  /**\r\n   * 异步加载图片并返回图片的几何信息\r\n   * @param src 图片路径\r\n   * @param info 图片信息\r\n   */\r\n  protected loadImg (\r\n    src: string,\r\n    info: ImgType,\r\n    resolveName = '$resolve'\r\n  ): Promise<HTMLImageElement | UniImageType> {\r\n    return new Promise((resolve, reject) => {\r\n      if (!src) reject(`=> '${info.src}' 不能为空或不合法`)\r\n      if (this.config.flag === 'WEB') {\r\n        let imgObj = new Image()\r\n        imgObj.src = src\r\n        imgObj.onload = () => resolve(imgObj)\r\n        imgObj.onerror = () => reject(`=> '${info.src}' 图片加载失败`)\r\n      } else {\r\n        // 其余平台向外暴露, 交给外部自行处理\r\n        info[resolveName] = resolve\r\n        return\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 公共绘制图片的方法\r\n   * @param imgObj 图片对象\r\n   * @param xAxis x轴位置\r\n   * @param yAxis y轴位置\r\n   * @param width 渲染宽度\r\n   * @param height 渲染高度\r\n   */\r\n  protected drawImage (\r\n    imgObj: HTMLImageElement | UniImageType,\r\n    xAxis: number,\r\n    yAxis: number,\r\n    width: number,\r\n    height: number\r\n  ): void {\r\n    let drawImg, { config, ctx } = this\r\n    if (['WEB', 'MP-WX'].includes(config.flag)) {\r\n      // 浏览器中直接绘制标签即可\r\n      drawImg = imgObj\r\n    } else if (['UNI-H5', 'UNI-MP', 'TARO-H5', 'TARO-MP'].includes(config.flag)) {\r\n      // 小程序中直接绘制一个路径\r\n      drawImg = (imgObj as UniImageType).path\r\n    }\r\n    return ctx.drawImage((drawImg as CanvasImageSource), xAxis, yAxis, width, height)\r\n  }\r\n\r\n  /**\r\n   * 获取长度\r\n   * @param length 将要转换的长度\r\n   * @return 返回长度\r\n   */\r\n  protected getLength (length: string | number | undefined): number {\r\n    if (isExpectType(length, 'number')) return length as number\r\n    if (isExpectType(length, 'string')) return this.changeUnits(length as string)\r\n    return 0\r\n  }\r\n\r\n  /**\r\n   * 转换单位\r\n   * @param { string } value 将要转换的值\r\n   * @param { number } denominator 分子\r\n   * @return { number } 返回新的字符串\r\n   */\r\n  protected changeUnits (value: string, denominator = 1): number {\r\n    return Number(value.replace(/^([-]*[0-9.]*)([a-z%]*)$/, (value, num, unit) => {\r\n      const unitFunc = {\r\n        '%': (n: number) => n * (denominator / 100),\r\n        'px': (n: number) => n * 1,\r\n        'rem': (n: number) => n * this.htmlFontSize,\r\n      }[unit]\r\n      if (unitFunc) return unitFunc(num)\r\n      // 如果找不到默认单位, 就交给外面处理\r\n      const otherUnitFunc = this.config.unitFunc\r\n      return otherUnitFunc ? otherUnitFunc(num, unit) : num\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * 添加一个新的响应式数据 (临时)\r\n   * @param data 数据\r\n   * @param key 属性\r\n   * @param value 新值\r\n   */\r\n  public $set (data: object, key: string | number, value: any) {\r\n    if (!data || typeof data !== 'object') return\r\n    defineReactive(data, key, value)\r\n  }\r\n\r\n  /**\r\n   * 添加一个属性计算 (临时)\r\n   * @param data 源数据\r\n   * @param key 属性名\r\n   * @param callback 回调函数\r\n   */\r\n  protected $computed (data: object, key: string, callback: Function) {\r\n    Object.defineProperty(data, key, {\r\n      get: () => {\r\n        return callback.call(this)\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 添加一个观察者 create user watcher\r\n   * @param expr 表达式\r\n   * @param handler 回调函数\r\n   * @param watchOpt 配置参数\r\n   * @return 卸载当前观察者的函数 (暂未返回)\r\n   */\r\n  protected $watch (\r\n    expr: string | Function,\r\n    handler: Function | WatchOptType,\r\n    watchOpt: WatchOptType = {}\r\n  ): Function {\r\n    if (typeof handler === 'object') {\r\n      watchOpt = handler\r\n      handler = watchOpt.handler!\r\n    }\r\n    // 创建 user watcher\r\n    const watcher = new Watcher(this, expr, handler, watchOpt)\r\n    // 判断是否需要初始化时触发回调\r\n    if (watchOpt.immediate) {\r\n      handler.call(this, watcher.value)\r\n    }\r\n    // 返回一个卸载当前观察者的函数\r\n    return function unWatchFn () {}\r\n  }\r\n}\r\n","/**\r\n * 转换为运算角度\r\n * @param { number } deg 数学角度\r\n * @return { number } 运算角度\r\n */\r\nexport const getAngle = (deg: number): number => {\r\n  return Math.PI / 180 * deg\r\n}\r\n\r\n/**\r\n * 根据角度计算圆上的点\r\n * @param { number } deg 运算角度\r\n * @param { number } r 半径\r\n * @return { Array<number> } 坐标[x, y]\r\n */\r\nexport const getArcPointerByDeg = (deg: number, r: number): [number, number] => {\r\n  return [+(Math.cos(deg) * r).toFixed(8), +(Math.sin(deg) * r).toFixed(8)]\r\n}\r\n\r\n/**\r\n * 根据点计算切线方程\r\n * @param { number } x 横坐标\r\n * @param { number } y 纵坐标\r\n * @return { Array<number> } [斜率, 常数]\r\n */\r\nexport const getTangentByPointer = (x: number, y: number): Array<number> => {\r\n  let k = - x / y\r\n  let b = -k * x + y\r\n  return [k, b]\r\n}\r\n\r\n// 根据三点画圆弧\r\nexport const drawRadian = (\r\n  flag: string,\r\n  ctx: CanvasRenderingContext2D,\r\n  r: number,\r\n  start: number,\r\n  end: number,\r\n  direction: boolean = true\r\n) => {\r\n  // 如果角度大于等于180度, 则分两次绘制, 因为 arcTo 无法绘制180度的圆弧\r\n  if (Math.abs(end - start).toFixed(8) >= getAngle(180).toFixed(8)) {\r\n    let middle = (end + start) / 2\r\n    if (direction) {\r\n      drawRadian(flag, ctx, r, start, middle, direction)\r\n      drawRadian(flag, ctx, r, middle, end, direction)\r\n    } else {\r\n      drawRadian(flag, ctx, r, middle, end, direction)\r\n      drawRadian(flag, ctx, r, start, middle, direction)\r\n    }\r\n    return false\r\n  }\r\n  // 如果方法相反, 则交换起点和终点\r\n  if (!direction) [start, end] = [end, start]\r\n  const [x1, y1] = getArcPointerByDeg(start, r)\r\n  const [x2, y2] = getArcPointerByDeg(end, r)\r\n  const [k1, b1] = getTangentByPointer(x1, y1)\r\n  const [k2, b2] = getTangentByPointer(x2, y2)\r\n  // 计算两条切线的交点\r\n  let x0 = (b2 - b1) / (k1 - k2)\r\n  let y0 = (k2 * b1 - k1 * b2) / (k2 - k1)\r\n  // 如果有任何一条切线垂直于x轴, 则斜率不存在\r\n  if (isNaN(x0)) {\r\n    Math.abs(x1) === +r.toFixed(8) && (x0 = x1)\r\n    Math.abs(x2) === +r.toFixed(8) && (x0 = x2)\r\n  }\r\n  if (k1 === Infinity || k1 === -Infinity) {\r\n    y0 = k2 * x0 + b2\r\n  }\r\n  else if (k2 === Infinity || k2 === -Infinity) {\r\n    y0 = k1 * x0 + b1\r\n  }\r\n  ctx.lineTo(x1, y1)\r\n  // 微信小程序下 arcTo 在安卓真机下绘制有 bug\r\n  if (flag.indexOf('MP') > 0) {\r\n    ctx.quadraticCurveTo(x0, y0, x2, y2)\r\n  } else {\r\n    ctx.arcTo(x0, y0, x2, y2, r)\r\n  }\r\n}\r\n\r\n// 绘制扇形\r\nexport const drawSector = (\r\n  flag: string,\r\n  ctx: CanvasRenderingContext2D,\r\n  minRadius: number,\r\n  maxRadius: number,\r\n  start: number,\r\n  end: number,\r\n  gutter: number,\r\n  background: string\r\n) => {\r\n  // 如果不存在 getter, 则直接使用 arc 绘制扇形\r\n  if (!gutter) {\r\n    ctx.beginPath()\r\n    ctx.fillStyle = background\r\n    ctx.moveTo(0, 0)\r\n    ctx.arc(0, 0, maxRadius, start, end, false)\r\n    ctx.closePath()\r\n    ctx.fill()\r\n  } else {\r\n    drawSectorByArcTo(flag, ctx, minRadius, maxRadius, start, end, gutter, background)\r\n  }\r\n}\r\n\r\n// 根据arcTo绘制扇形\r\nexport const drawSectorByArcTo = (\r\n  flag: string,\r\n  ctx: CanvasRenderingContext2D,\r\n  minRadius: number,\r\n  maxRadius: number,\r\n  start: number,\r\n  end: number,\r\n  gutter: number,\r\n  background: string\r\n) => {\r\n  if (!minRadius) minRadius = gutter\r\n  // 内外圆弧分别进行等边缩放\r\n  let maxGutter = getAngle(90 / Math.PI / maxRadius * gutter)\r\n  let minGutter = getAngle(90 / Math.PI / minRadius * gutter)\r\n  let maxStart = start + maxGutter\r\n  let maxEnd = end - maxGutter\r\n  let minStart = start + minGutter\r\n  let minEnd = end - minGutter\r\n  ctx.beginPath()\r\n  ctx.fillStyle = background\r\n  ctx.moveTo(...getArcPointerByDeg(maxStart, maxRadius))\r\n  drawRadian(flag, ctx, maxRadius, maxStart, maxEnd, true)\r\n  // 如果 getter 比按钮短就绘制圆弧, 反之计算新的坐标点\r\n  if (minEnd > minStart) {\r\n    drawRadian(flag, ctx, minRadius, minStart, minEnd, false)\r\n  } else {\r\n    ctx.lineTo(\r\n      ...getArcPointerByDeg(\r\n        (start + end) / 2,\r\n        gutter / 2 / Math.abs(Math.sin((start - end) / 2))\r\n      )\r\n    )\r\n  }\r\n  ctx.closePath()\r\n  ctx.fill()\r\n}\r\n\r\n// 绘制圆角矩形 (由于微信小程序的 arcTo 有 bug, 下面的圆弧使用二次贝塞尔曲线代替)\r\nexport const drawRoundRect = (\r\n  ctx: CanvasRenderingContext2D,\r\n  x: number,\r\n  y: number,\r\n  w: number,\r\n  h: number,\r\n  r: number,\r\n  color: string\r\n) => {\r\n  let min = Math.min(w, h)\r\n  if (r > min / 2) r = min / 2\r\n  ctx.beginPath()\r\n  ctx.fillStyle = color\r\n  ctx.moveTo(x + r, y)\r\n  ctx.lineTo(x + r, y)\r\n  ctx.lineTo(x + w - r, y)\r\n  // ctx.arcTo(x + w, y, x + w, y + r, r)\r\n  ctx.quadraticCurveTo(x + w, y, x + w, y + r)\r\n  ctx.lineTo(x + w, y + h - r)\r\n  // ctx.arcTo(x + w, y + h, x + w - r, y + h, r)\r\n  ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h)\r\n  ctx.lineTo(x + r, y + h)\r\n  // ctx.arcTo(x, y + h, x, y + h - r, r)\r\n  ctx.quadraticCurveTo(x, y + h, x, y + h - r)\r\n  ctx.lineTo(x, y + r)\r\n  // ctx.arcTo(x, y, x + r, y, r)\r\n  ctx.quadraticCurveTo(x, y, x + r, y)\r\n  ctx.closePath()\r\n  ctx.fill()\r\n}\r\n\r\n/**\r\n * 创建线性渐变色\r\n */\r\nexport const getLinearGradient = (\r\n  ctx: CanvasRenderingContext2D,\r\n  x: number,\r\n  y: number,\r\n  w: number,\r\n  h: number,\r\n  background: string\r\n) => {\r\n  const context = (/linear-gradient\\((.+)\\)/.exec(background) as Array<any>)[1]\r\n    .split(',') // 根据逗号分割\r\n    .map((text: string) => text.trim()) // 去除两边空格\r\n  let deg = context.shift(), direction: [number, number, number, number] = [0, 0, 0, 0]\r\n  // 通过起始点和角度计算渐变终点的坐标点, 这里感谢泽宇大神提醒我使用勾股定理....\r\n  if (deg.includes('deg')) {\r\n    deg = deg.slice(0, -3) % 360\r\n    // 根据4个象限定义起点坐标, 根据45度划分8个区域计算终点坐标\r\n    const getLenOfTanDeg = (deg: number) => Math.tan(deg / 180 * Math.PI)\r\n    if (deg >= 0 && deg < 45) direction = [x, y + h, x + w, y + h - w * getLenOfTanDeg(deg - 0)]\r\n    else if (deg >= 45 && deg < 90) direction = [x, y + h, (x + w) - h * getLenOfTanDeg(deg - 45), y]\r\n    else if (deg >= 90 && deg < 135) direction = [x + w, y + h, (x + w) - h * getLenOfTanDeg(deg - 90), y]\r\n    else if (deg >= 135 && deg < 180) direction = [x + w, y + h, x, y + w * getLenOfTanDeg(deg - 135)]\r\n    else if (deg >= 180 && deg < 225) direction = [x + w, y, x, y + w * getLenOfTanDeg(deg - 180)]\r\n    else if (deg >= 225 && deg < 270) direction = [x + w, y, x + h * getLenOfTanDeg(deg - 225), y + h]\r\n    else if (deg >= 270 && deg < 315) direction = [x, y, x + h * getLenOfTanDeg(deg - 270), y + h]\r\n    else if (deg >= 315 && deg < 360) direction = [x, y, x + w, y + h - w * getLenOfTanDeg(deg - 315)]\r\n  }\r\n  // 创建四个简单的方向坐标\r\n  else if (deg.includes('top')) direction = [x, y + h, x, y]\r\n  else if (deg.includes('bottom')) direction = [x, y, x, y + h]\r\n  else if (deg.includes('left')) direction = [x + w, y, x, y]\r\n  else if (deg.includes('right')) direction = [x, y, x + w, y]\r\n  // 创建线性渐变必须使用整数坐标\r\n  const gradient = ctx.createLinearGradient(...(direction.map(n => n >> 0) as [number, number, number, number]))\r\n  // 这里后期重构, 先用any代替\r\n  return context.reduce((gradient: any, item: any, index: any) => {\r\n    const info = item.split(' ')\r\n    if (info.length === 1) gradient.addColorStop(index, info[0])\r\n    else if (info.length === 2) gradient.addColorStop(...info)\r\n    return gradient\r\n  }, gradient)\r\n}\r\n","/**\r\n * 缓动函数\r\n * t: current time（当前时间）\r\n * b: beginning value（初始值）\r\n * c: change in value（变化量）\r\n * d: duration（持续时间）\r\n * \r\n * 感谢张鑫旭大佬 https://github.com/zhangxinxu/Tween\r\n */\r\n\r\ninterface SpeedType {\r\n  easeIn: (t: number, b: number, c: number, d: number) => number\r\n  easeOut: (t: number, b: number, c: number, d: number) => number\r\n}\r\n\r\n// 二次方的缓动\r\nexport const quad: SpeedType = {\r\n  easeIn: function (t, b, c, d) {\r\n    if (t >= d) t = d\r\n    return c * (t /= d) * t + b\r\n  },\r\n  easeOut: function (t, b, c, d) {\r\n    if (t >= d) t = d\r\n    return -c * (t /= d) * (t - 2) + b\r\n  }\r\n}\r\n\r\n// 三次方的缓动\r\nexport const cubic: SpeedType = {\r\n  easeIn: function (t, b, c, d) {\r\n    if (t >= d) t = d\r\n    return c * (t /= d) * t * t + b\r\n  },\r\n  easeOut: function (t, b, c, d) {\r\n    if (t >= d) t = d\r\n    return c * ((t = t / d - 1) * t * t + 1) + b\r\n  }\r\n}\r\n\r\n// 四次方的缓动\r\nexport const quart: SpeedType = {\r\n  easeIn: function (t, b, c, d) {\r\n    if (t >= d) t = d\r\n    return c * (t /= d) * t * t * t + b\r\n  },\r\n  easeOut: function (t, b, c, d) {\r\n    if (t >= d) t = d\r\n    return -c * ((t = t / d - 1) * t * t * t - 1) + b\r\n  }\r\n}\r\n\r\n// 五次方的缓动\r\nexport const quint: SpeedType = {\r\n  easeIn: function (t, b, c, d) {\r\n    if (t >= d) t = d\r\n    return c * (t /= d) * t * t * t * t + b\r\n  },\r\n  easeOut: function (t, b, c, d) {\r\n    if (t >= d) t = d\r\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b\r\n  }\r\n}\r\n\r\n// 正弦曲线的缓动\r\nexport const sine: SpeedType = {\r\n  easeIn: function (t, b, c, d) {\r\n    if (t >= d) t = d\r\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b\r\n  },\r\n  easeOut: function (t, b, c, d) {\r\n    if (t >= d) t = d\r\n    return c * Math.sin(t / d * (Math.PI / 2)) + b\r\n  }\r\n}\r\n\r\n// 指数曲线的缓动\r\nexport const expo: SpeedType = {\r\n  easeIn: function (t, b, c, d) {\r\n    if (t >= d) t = d\r\n    return (t == 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b\r\n  },\r\n  easeOut: function (t, b, c, d) {\r\n    if (t >= d) t = d\r\n    return (t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b\r\n  }\r\n}\r\n\r\n// 圆形曲线的缓动\r\nexport const circ: SpeedType = {\r\n  easeIn: function (t, b, c, d) {\r\n    if (t >= d) t = d\r\n    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b\r\n  },\r\n  easeOut: function (t, b, c, d) {\r\n    if (t >= d) t = d\r\n    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b\r\n  }\r\n}\r\n","import Lucky from './lucky'\r\nimport { ConfigType } from '../types/index'\r\nimport LuckyWheelConfig, {\r\n  BlockType, BlockImgType,\r\n  PrizeType, PrizeImgType,\r\n  ButtonType, ButtonImgType,\r\n  DefaultConfigType,\r\n  DefaultStyleType,\r\n  StartCallbackType,\r\n  EndCallbackType\r\n} from '../types/wheel'\r\nimport { FontType, ImgType, UniImageType } from '../types/index'\r\nimport { isExpectType, removeEnter, hasBackground } from '../utils/index'\r\nimport { getAngle, drawSector } from '../utils/math'\r\nimport * as Tween from '../utils/tween'\r\n\r\nexport default class LuckyWheel extends Lucky {\r\n  private blocks: Array<BlockType> = []\r\n  private prizes: Array<PrizeType> = []\r\n  private buttons: Array<ButtonType> = []\r\n  private defaultConfig: DefaultConfigType = {}\r\n  private _defaultConfig = {\r\n    gutter: '0px',\r\n    offsetDegree: 0,\r\n    speed: 20,\r\n    speedFunction: 'quad',\r\n    accelerationTime: 2500,\r\n    decelerationTime: 2500,\r\n    stopRange: 0.8,\r\n  }\r\n  private defaultStyle: DefaultStyleType = {}\r\n  private _defaultStyle = {\r\n    fontSize: '18px',\r\n    fontColor: '#000',\r\n    fontStyle: 'sans-serif',\r\n    fontWeight: '400',\r\n    lineHeight: '',\r\n    background: 'rgba(0,0,0,0)',\r\n    wordWrap: true,\r\n    lengthLimit: '90%',\r\n  }\r\n  private startCallback?: StartCallbackType\r\n  private endCallback?: EndCallbackType\r\n  private Radius = 0                    // 大转盘半径\r\n  private prizeRadius = 0               // 奖品区域半径\r\n  private prizeDeg = 0                  // 奖品数学角度\r\n  private prizeRadian = 0               // 奖品运算角度\r\n  private rotateDeg = 0                 // 转盘旋转角度\r\n  private maxBtnRadius = 0              // 最大按钮半径\r\n  private startTime = 0                 // 开始时间戳\r\n  private endTime = 0                   // 停止时间戳\r\n  private stopDeg = 0                   // 刻舟求剑\r\n  private endDeg = 0                    // 停止角度\r\n  private FPS = 16.6                    // 屏幕刷新率\r\n  /**\r\n   * 中奖索引\r\n   * prizeFlag = undefined 时, 处于开始抽奖阶段, 正常旋转\r\n   * prizeFlag >= 0 时, 说明stop方法被调用, 并且传入了中奖索引\r\n   * prizeFlag === -1 时, 说明stop方法被调用, 并且传入了负值, 本次抽奖无效\r\n   */\r\n  private prizeFlag: number | undefined\r\n  private blockImgs: Array<HTMLImageElement[] | UniImageType[]> = [[]]\r\n  private prizeImgs: Array<HTMLImageElement[] | UniImageType[]> = [[]]\r\n  private btnImgs: Array<HTMLImageElement[] | UniImageType[]> = [[]]\r\n\r\n  /**\r\n   * 大转盘构造器\r\n   * @param config 元素标识\r\n   * @param data 抽奖配置项\r\n   */\r\n  constructor (config: ConfigType, data: LuckyWheelConfig = {}) {\r\n    super(config)\r\n    if (config.ob) {\r\n      this.initData(data)\r\n      this.initWatch()\r\n    }\r\n    this.initComputed()\r\n    // 创建前回调函数\r\n    config.beforeCreate?.call(this)\r\n    // 收集首次渲染的图片\r\n    this.init({\r\n      blockImgs: this.blocks.map(block => block.imgs),\r\n      prizeImgs: this.prizes.map(prize => prize.imgs),\r\n      btnImgs: this.buttons.map(btn => btn.imgs),\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 初始化数据\r\n   * @param data\r\n   */\r\n  private initData (data: LuckyWheelConfig): void {\r\n    this.$set(this, 'blocks', data.blocks || [])\r\n    this.$set(this, 'prizes', data.prizes || [])\r\n    this.$set(this, 'buttons', data.buttons || [])\r\n    this.$set(this, 'defaultConfig', data.defaultConfig || {})\r\n    this.$set(this, 'defaultStyle', data.defaultStyle || {})\r\n    this.$set(this, 'startCallback', data.start)\r\n    this.$set(this, 'endCallback', data.end)\r\n  }\r\n\r\n  /**\r\n   * 初始化属性计算\r\n   */\r\n  private initComputed () {\r\n    // 默认配置\r\n    this.$computed(this, '_defaultConfig', () => {\r\n      const config = {\r\n        gutter: '0px',\r\n        offsetDegree: 0,\r\n        speed: 20,\r\n        speedFunction: 'quad',\r\n        accelerationTime: 2500,\r\n        decelerationTime: 2500,\r\n        stopRange: 0.8,\r\n        ...this.defaultConfig\r\n      }\r\n      return config\r\n    })\r\n    // 默认样式\r\n    this.$computed(this, '_defaultStyle', () => {\r\n      const style = {\r\n        fontSize: '18px',\r\n        fontColor: '#000',\r\n        fontStyle: 'sans-serif',\r\n        fontWeight: '400',\r\n        background: 'rgba(0,0,0,0)',\r\n        wordWrap: true,\r\n        lengthLimit: '90%',\r\n        ...this.defaultStyle\r\n      }\r\n      return style\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 初始化观察者\r\n   */\r\n  private initWatch () {\r\n    // 观察 blocks 变化收集图片\r\n    this.$watch('blocks', (newData: Array<BlockType>) => {\r\n      return this.init({ blockImgs: newData.map(cell => cell.imgs) })\r\n    }, { deep: true })\r\n    // 观察 prizes 变化收集图片\r\n    this.$watch('prizes', (newData: Array<PrizeType>) => {\r\n      return this.init({ prizeImgs: newData.map(cell => cell.imgs) })\r\n    }, { deep: true })\r\n    // 观察 buttons 变化收集图片\r\n    this.$watch('buttons', (newData: Array<ButtonType>) => {\r\n      return this.init({ btnImgs: newData.map(cell => cell.imgs) })\r\n    }, { deep: true })\r\n    this.$watch('defaultConfig', () => this.draw(), { deep: true })\r\n    this.$watch('defaultStyle', () => this.draw(), { deep: true })\r\n    this.$watch('startCallback', () => this.init({}))\r\n    this.$watch('endCallback', () => this.init({}))\r\n  }\r\n\r\n  /**\r\n   * 初始化 canvas 抽奖\r\n   * @param { willUpdateImgs } willUpdateImgs 需要更新的图片\r\n   */\r\n  public init (willUpdateImgs: {\r\n    blockImgs?: Array<BlockImgType[] | undefined>\r\n    prizeImgs?: Array<PrizeImgType[] | undefined>\r\n    btnImgs?: Array<ButtonImgType[] | undefined>\r\n  }): void {\r\n    super.init()\r\n    const { config, ctx } = this\r\n    this.Radius = Math.min(this.boxWidth, this.boxHeight) / 2\r\n    // 初始化前回调函数\r\n    config.beforeInit?.call(this)\r\n    ctx.translate(this.Radius, this.Radius)\r\n    this.draw() // 先画一次, 防止闪烁\r\n    this.draw() // 再画一次, 拿到正确的按钮轮廓\r\n    // 异步加载图片\r\n    Object.keys(willUpdateImgs).forEach(key => {\r\n      const imgName = key as 'blockImgs' | 'prizeImgs' | 'btnImgs'\r\n      const cellName = {\r\n        blockImgs: 'blocks',\r\n        prizeImgs: 'prizes',\r\n        btnImgs: 'buttons',\r\n      }[imgName] as 'blocks' | 'prizes' | 'buttons'\r\n      const willUpdate = willUpdateImgs[imgName]\r\n      willUpdate && willUpdate.forEach((imgs, cellIndex) => {\r\n        imgs && imgs.forEach((imgInfo, imgIndex) => {\r\n          this.loadAndCacheImg(cellName, cellIndex, imgName, imgIndex, () => {\r\n            this.draw()\r\n          })\r\n        })\r\n      })\r\n    })\r\n    // 初始化后回调函数\r\n    config.afterInit?.call(this)\r\n  }\r\n\r\n  /**\r\n   * canvas点击事件\r\n   * @param e 事件参数\r\n   */\r\n  protected handleClick (e: MouseEvent): void {\r\n    const { ctx } = this\r\n    ctx.beginPath()\r\n    ctx.arc(0, 0, this.maxBtnRadius, 0, Math.PI * 2, false)\r\n    if (!ctx.isPointInPath(e.offsetX, e.offsetY)) return\r\n    if (this.startTime) return\r\n    this.startCallback?.(e)\r\n  }\r\n\r\n  /**\r\n   * 单独加载某一张图片并计算其实际渲染宽高\r\n   * @param { number } cellIndex 奖品索引\r\n   * @param { number } imgIndex 奖品图片索引\r\n   * @param { Function } callBack 图片加载完毕回调\r\n   */\r\n  private async loadAndCacheImg (\r\n    cellName: 'blocks' | 'prizes' | 'buttons',\r\n    cellIndex: number,\r\n    imgName: 'blockImgs' | 'prizeImgs' | 'btnImgs',\r\n    imgIndex: number,\r\n    callBack: () => void\r\n  ) {\r\n    // 获取图片信息\r\n    const cell: BlockType | PrizeType | ButtonType = this[cellName][cellIndex]\r\n    if (!cell || !cell.imgs) return\r\n    const imgInfo = cell.imgs[imgIndex]\r\n    if (!imgInfo) return\r\n    if (!this[imgName][cellIndex]) this[imgName][cellIndex] = []\r\n    // 异步加载图片\r\n    this.loadImg(imgInfo.src, imgInfo).then(res => {\r\n      this[imgName][cellIndex][imgIndex] = res\r\n      callBack.call(this)\r\n    }).catch(err => {\r\n      console.error(`${cellName}[${cellIndex}].imgs[${imgIndex}] ${err}`)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 计算图片的渲染宽高\r\n   * @param imgObj 图片标签元素\r\n   * @param imgInfo 图片信息\r\n   * @param maxWidth 最大宽度\r\n   * @param maxHeight 最大高度\r\n   * @return [渲染宽度, 渲染高度]\r\n   */\r\n  private computedWidthAndHeight (\r\n    imgObj: HTMLImageElement | UniImageType,\r\n    imgInfo: ImgType,\r\n    maxWidth: number,\r\n    maxHeight: number\r\n  ): [number, number] {\r\n    // 根据配置的样式计算图片的真实宽高\r\n    if (!imgInfo.width && !imgInfo.height) {\r\n      // 如果没有配置宽高, 则使用图片本身的宽高\r\n      return [imgObj.width, imgObj.height]\r\n    } else if (imgInfo.width && !imgInfo.height) {\r\n      // 如果只填写了宽度, 没填写高度\r\n      let trueWidth = this.getWidth(imgInfo.width, maxWidth)\r\n      // 那高度就随着宽度进行等比缩放\r\n      return [trueWidth, imgObj.height * (trueWidth / imgObj.width)]\r\n    } else if (!imgInfo.width && imgInfo.height) {\r\n      // 如果只填写了宽度, 没填写高度\r\n      let trueHeight = this.getHeight(imgInfo.height, maxHeight)\r\n      // 那宽度就随着高度进行等比缩放\r\n      return [imgObj.width * (trueHeight / imgObj.height), trueHeight]\r\n    }\r\n    // 如果宽度和高度都填写了, 就如实计算\r\n    return [\r\n      this.getWidth(imgInfo.width, maxWidth),\r\n      this.getHeight(imgInfo.height, maxHeight)\r\n    ]\r\n  }\r\n\r\n  /**\r\n   * 开始绘制\r\n   */\r\n  protected draw (): void {\r\n    const { config, ctx, _defaultConfig, _defaultStyle } = this\r\n    // 触发绘制前回调\r\n    config.beforeDraw?.call(this, ctx)\r\n    // 清空画布\r\n    ctx.clearRect(-this.Radius, -this.Radius, this.Radius * 2, this.Radius * 2)\r\n    // 绘制blocks边框\r\n    this.prizeRadius = this.blocks.reduce((radius, block, blockIndex) => {\r\n      if (hasBackground(block.background)) {\r\n        ctx.beginPath()\r\n        ctx.fillStyle = block.background!\r\n        ctx.arc(0, 0, radius, 0, Math.PI * 2, false)\r\n        ctx.fill()\r\n      }\r\n      block.imgs && block.imgs.forEach((imgInfo, imgIndex) => {\r\n        if (!this.blockImgs[blockIndex]) return\r\n        const blockImg = this.blockImgs[blockIndex][imgIndex]\r\n        if (!blockImg) return\r\n        // 绘制图片\r\n        const [trueWidth, trueHeight] = this.computedWidthAndHeight(blockImg, imgInfo, radius * 2, radius * 2)\r\n        const [xAxis, yAxis] = [this.getOffsetX(trueWidth), this.getHeight(imgInfo.top, radius * 2) - radius]\r\n        ctx.save()\r\n        imgInfo.rotate && ctx.rotate(getAngle(this.rotateDeg))\r\n        this.drawImage(blockImg, xAxis, yAxis, trueWidth, trueHeight)\r\n        ctx.restore()\r\n      })\r\n      return radius - this.getLength(block.padding && block.padding.split(' ')[0])\r\n    }, this.Radius)\r\n    // 计算起始弧度\r\n    this.prizeDeg = 360 / this.prizes.length\r\n    this.prizeRadian = getAngle(this.prizeDeg)\r\n    let start = getAngle(-90 + this.rotateDeg + _defaultConfig.offsetDegree)\r\n    // 计算文字横坐标\r\n    const getFontX = (line: string) => {\r\n      return this.getOffsetX(ctx.measureText(line).width)\r\n    }\r\n    // 计算文字纵坐标\r\n    const getFontY = (font: FontType, height: number, lineIndex: number) => {\r\n      // 优先使用字体行高, 要么使用默认行高, 其次使用字体大小, 否则使用默认字体大小\r\n      const lineHeight = font.lineHeight || _defaultStyle.lineHeight || font.fontSize || _defaultStyle.fontSize\r\n      return this.getHeight(font.top, height) + (lineIndex + 1) * this.getLength(lineHeight)\r\n    }\r\n    ctx.save()\r\n    // 绘制prizes奖品区域\r\n    this.prizes.forEach((prize, prizeIndex) => {\r\n      // 计算当前奖品区域中间坐标点\r\n      let currMiddleDeg = start + prizeIndex * this.prizeRadian\r\n      // 奖品区域可见高度\r\n      let prizeHeight = this.prizeRadius - this.maxBtnRadius\r\n      // 绘制背景\r\n      const background = prize.background || _defaultStyle.background\r\n      hasBackground(background) && drawSector(\r\n        config.flag, ctx,\r\n        this.maxBtnRadius, this.prizeRadius,\r\n        currMiddleDeg - this.prizeRadian / 2,\r\n        currMiddleDeg + this.prizeRadian / 2,\r\n        this.getLength(_defaultConfig.gutter),\r\n        background\r\n      )\r\n      // 计算临时坐标并旋转文字\r\n      let x = Math.cos(currMiddleDeg) * this.prizeRadius\r\n      let y = Math.sin(currMiddleDeg) * this.prizeRadius\r\n      ctx.translate(x, y)\r\n      ctx.rotate(currMiddleDeg + getAngle(90))\r\n      // 绘制图片\r\n      prize.imgs && prize.imgs.forEach((imgInfo, imgIndex) => {\r\n        if (!this.prizeImgs[prizeIndex]) return\r\n        const prizeImg = this.prizeImgs[prizeIndex][imgIndex]\r\n        if (!prizeImg) return\r\n        const [trueWidth, trueHeight] = this.computedWidthAndHeight(\r\n          prizeImg,\r\n          imgInfo,\r\n          this.prizeRadian * this.prizeRadius,\r\n          prizeHeight\r\n        )\r\n        const [xAxis, yAxis] = [this.getOffsetX(trueWidth), this.getHeight(imgInfo.top, prizeHeight)]\r\n        this.drawImage(prizeImg, xAxis, yAxis, trueWidth, trueHeight)\r\n      })\r\n      // 逐行绘制文字\r\n      prize.fonts && prize.fonts.forEach(font => {\r\n        let fontColor = font.fontColor || _defaultStyle.fontColor\r\n        let fontWeight = font.fontWeight || _defaultStyle.fontWeight\r\n        let fontSize = this.getLength(font.fontSize || _defaultStyle.fontSize)\r\n        let fontStyle = font.fontStyle || _defaultStyle.fontStyle\r\n        ctx.fillStyle = fontColor!\r\n        ctx.font = `${fontWeight} ${fontSize >> 0}px ${fontStyle}`\r\n        let lines = [], text = String(font.text)\r\n        if (Object.prototype.hasOwnProperty.call(font, 'wordWrap') ? font.wordWrap : _defaultStyle.wordWrap) {\r\n          text = removeEnter(text)\r\n          let str = ''\r\n          for (let i = 0; i < text.length; i++) {\r\n            str += text[i]\r\n            let currWidth = ctx.measureText(str).width\r\n            let maxWidth = (this.prizeRadius - getFontY(font, prizeHeight, lines.length))\r\n              * Math.tan(this.prizeRadian / 2) * 2 - this.getLength(_defaultConfig.gutter)\r\n            if (currWidth > this.getWidth(font.lengthLimit || _defaultStyle.lengthLimit, maxWidth)) {\r\n              lines.push(str.slice(0, -1))\r\n              str = text[i]\r\n            }\r\n          }\r\n          if (str) lines.push(str)\r\n          if (!lines.length) lines.push(text)\r\n        } else {\r\n          lines = text.split('\\n')\r\n        }\r\n        lines.filter(line => !!line).forEach((line, lineIndex) => {\r\n          ctx.fillText(line, getFontX(line), getFontY(font, prizeHeight, lineIndex))\r\n        })\r\n      })\r\n      // 修正旋转角度和原点坐标\r\n      ctx.rotate(getAngle(360) - currMiddleDeg - getAngle(90))\r\n      ctx.translate(-x, -y)\r\n    })\r\n    ctx.restore()\r\n    // 绘制按钮\r\n    this.buttons.forEach((btn, btnIndex) => {\r\n      let radius = this.getHeight(btn.radius)\r\n      // 绘制背景颜色\r\n      this.maxBtnRadius = Math.max(this.maxBtnRadius, radius)\r\n      if (hasBackground(btn.background)) {\r\n        ctx.beginPath()\r\n        ctx.fillStyle = btn.background as string\r\n        ctx.arc(0, 0, radius, 0, Math.PI * 2, false)\r\n        ctx.fill()\r\n      }\r\n      // 绘制指针\r\n      if (btn.pointer && hasBackground(btn.background)) {\r\n        ctx.beginPath()\r\n        ctx.fillStyle = btn.background as string\r\n        ctx.moveTo(-radius, 0)\r\n        ctx.lineTo(radius, 0)\r\n        ctx.lineTo(0, -radius * 2)\r\n        ctx.closePath()\r\n        ctx.fill()\r\n      }\r\n      // 绘制按钮图片\r\n      btn.imgs && btn.imgs.forEach((imgInfo, imgIndex) => {\r\n        if (!this.btnImgs[btnIndex]) return\r\n        const btnImg = this.btnImgs[btnIndex][imgIndex]\r\n        if (!btnImg) return\r\n        const [trueWidth, trueHeight] = this.computedWidthAndHeight(btnImg, imgInfo, radius * 2, radius * 2)\r\n        const [xAxis, yAxis] = [this.getOffsetX(trueWidth), this.getHeight(imgInfo.top, radius)]\r\n        this.drawImage(btnImg, xAxis, yAxis, trueWidth, trueHeight)\r\n      })\r\n      // 绘制按钮文字\r\n      btn.fonts && btn.fonts.forEach(font => {\r\n        let fontColor = font.fontColor || _defaultStyle.fontColor\r\n        let fontWeight = font.fontWeight || _defaultStyle.fontWeight\r\n        let fontSize = this.getLength(font.fontSize || _defaultStyle.fontSize)\r\n        let fontStyle = font.fontStyle || _defaultStyle.fontStyle\r\n        ctx.fillStyle = fontColor!\r\n        ctx.font = `${fontWeight} ${fontSize >> 0}px ${fontStyle}`\r\n        String(font.text).split('\\n').forEach((line, lineIndex) => {\r\n          ctx.fillText(line, getFontX(line), getFontY(font, radius, lineIndex))\r\n        })\r\n      })\r\n    })\r\n    // 触发绘制后回调\r\n    config.afterDraw?.call(this, ctx)\r\n  }\r\n\r\n  /**\r\n   * 对外暴露: 开始抽奖方法\r\n   */\r\n  public play (): void {\r\n    // 再次拦截, 因为play是可以异步调用的\r\n    if (this.startTime) return\r\n    this.startTime = Date.now()\r\n    this.prizeFlag = void 0\r\n    this.run()\r\n  }\r\n\r\n  /**\r\n   * 对外暴露: 缓慢停止方法\r\n   * @param index 中奖索引\r\n   */\r\n  public stop (index: number): void {\r\n    // 判断 prizeFlag 是否等于 -1\r\n    this.prizeFlag = index < 0 ? -1 : index % this.prizes.length\r\n    // 如果是 -1 就初始化状态\r\n    if (this.prizeFlag === -1) {\r\n      this.rotateDeg = this.prizeDeg / 2 - this._defaultConfig.offsetDegree\r\n      this.draw()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 实际开始执行方法\r\n   * @param num 记录帧动画执行多少次\r\n   */\r\n  private run (num: number = 0): void {\r\n    const { rAF, prizeFlag, prizeDeg, rotateDeg, _defaultConfig } = this\r\n    let interval = Date.now() - this.startTime\r\n    // 先完全旋转, 再停止\r\n    if (interval >= _defaultConfig.accelerationTime && prizeFlag !== void 0) {\r\n      // 记录帧率\r\n      this.FPS = interval / num\r\n      // 记录开始停止的时间戳\r\n      this.endTime = Date.now()\r\n      // 记录开始停止的位置\r\n      this.stopDeg = rotateDeg\r\n      // 停止范围\r\n      const stopRange = (Math.random() * prizeDeg - prizeDeg / 2) * this.getLength(_defaultConfig.stopRange)\r\n      // 测算最终停止的角度\r\n      let i = 0\r\n      while (++i) {\r\n        const endDeg = 360 * i - prizeFlag * prizeDeg - rotateDeg - _defaultConfig.offsetDegree + stopRange\r\n        let currSpeed = Tween[_defaultConfig.speedFunction].easeOut(this.FPS, this.stopDeg, endDeg, _defaultConfig.decelerationTime) - this.stopDeg\r\n        if (currSpeed > _defaultConfig.speed) {\r\n          this.endDeg = endDeg\r\n          break\r\n        }\r\n      }\r\n      return this.slowDown()\r\n    }\r\n    this.rotateDeg = (rotateDeg + Tween[_defaultConfig.speedFunction].easeIn(interval, 0, _defaultConfig.speed, _defaultConfig.accelerationTime)) % 360\r\n    this.draw()\r\n    rAF(this.run.bind(this, num + 1))\r\n  }\r\n\r\n  /**\r\n   * 缓慢停止的方法\r\n   */\r\n  private slowDown (): void {\r\n    const { rAF, prizes, prizeFlag, stopDeg, endDeg, _defaultConfig } = this\r\n    let interval = Date.now() - this.endTime\r\n    if (prizeFlag === -1) return (this.startTime = 0, void 0)\r\n    if (interval >= _defaultConfig.decelerationTime) {\r\n      this.startTime = 0\r\n      this.endCallback?.({...prizes.find((prize, index) => index === prizeFlag)})\r\n      return\r\n    }\r\n    this.rotateDeg = Tween[_defaultConfig.speedFunction].easeOut(interval, stopDeg, endDeg, _defaultConfig.decelerationTime) % 360\r\n    this.draw()\r\n    rAF(this.slowDown.bind(this))\r\n  }\r\n\r\n  /**\r\n   * 获取相对宽度\r\n   * @param length 将要转换的宽度\r\n   * @param width 宽度计算百分比\r\n   * @return 返回相对宽度\r\n   */\r\n  private getWidth (\r\n    length: string | number | undefined,\r\n    width = this.prizeRadian * this.prizeRadius\r\n  ): number {\r\n    if (isExpectType(length, 'number')) return (length as number)\r\n    if (isExpectType(length, 'string')) return this.changeUnits(length as string, width)\r\n    return 0\r\n  }\r\n\r\n  /**\r\n   * 获取相对高度\r\n   * @param length 将要转换的高度\r\n   * @param height 高度计算百分比\r\n   * @return 返回相对高度\r\n   */\r\n  private getHeight (\r\n    length: string | number | undefined,\r\n    height: number = this.prizeRadius\r\n  ): number {\r\n    if (isExpectType(length, 'number')) return (length as number)\r\n    if (isExpectType(length, 'string')) return this.changeUnits(length as string, height)\r\n    return 0\r\n  }\r\n\r\n  /**\r\n   * 获取相对(居中)X坐标\r\n   * @param width\r\n   * @return 返回x坐标\r\n   */\r\n  private getOffsetX (width: number): number {\r\n    return -width / 2\r\n  }\r\n\r\n  /**\r\n   * 换算渲染坐标\r\n   * @param x\r\n   * @param y\r\n   */\r\n  protected conversionAxis (x: number, y: number): [number, number] {\r\n    const { config } = this\r\n    return [x / config.dpr - this.Radius, y / config.dpr - this.Radius]\r\n  }\r\n}\r\n","import Lucky from './lucky'\r\nimport { ConfigType, UniImageType } from '../types/index'\r\nimport LuckyGridConfig, {\r\n  BlockType, BlockImgType,\r\n  PrizeType, PrizeImgType,\r\n  ButtonType, ButtonImgType,\r\n  CellFontType, CellImgType,\r\n  RowsType, ColsType,\r\n  CellType,\r\n  DefaultConfigType,\r\n  DefaultStyleType,\r\n  ActiveStyleType,\r\n  StartCallbackType,\r\n  EndCallbackType,\r\n} from '../types/grid'\r\nimport { isExpectType, removeEnter, computePadding, hasBackground } from '../utils/index'\r\nimport { drawRoundRect, getLinearGradient } from '../utils/math'\r\nimport { quad } from '../utils/tween'\r\n\r\ntype ImgObjType = HTMLImageElement | UniImageType\r\n\r\nexport default class LuckyGrid extends Lucky {\r\n  private rows: RowsType = 3\r\n  private cols: ColsType = 3\r\n  private blocks: Array<BlockType> = []\r\n  private prizes: Array<PrizeType> = []\r\n  private buttons: Array<ButtonType> = []\r\n  private button?: ButtonType\r\n  private defaultConfig: DefaultConfigType = {}\r\n  private _defaultConfig = { // 此处初始化无用, 是为了方便类型推导才加的\r\n    gutter: 5,\r\n    speed: 20,\r\n    accelerationTime: 2500,\r\n    decelerationTime: 2500,\r\n  }\r\n  private defaultStyle: DefaultStyleType = {}\r\n  private _defaultStyle = { // 此处初始化无用, 是为了方便类型推导才加的\r\n    borderRadius: 20,\r\n    fontColor: '#000',\r\n    fontSize: '18px',\r\n    fontStyle: 'sans-serif',\r\n    fontWeight: '400',\r\n    lineHeight: '',\r\n    background: 'rgba(0,0,0,0)',\r\n    shadow: '',\r\n    wordWrap: true,\r\n    lengthLimit: '90%',\r\n  }\r\n  private activeStyle: ActiveStyleType = {}\r\n  private _activeStyle = { // 此处初始化无用, 是为了方便类型推导才加的\r\n    background: '#ffce98',\r\n    shadow: '',\r\n    fontStyle: '',\r\n    fontWeight: '',\r\n    fontSize: '',\r\n    lineHeight: '',\r\n    fontColor: '',\r\n  }\r\n  private startCallback?: StartCallbackType\r\n  private endCallback?: EndCallbackType\r\n  private cellWidth = 0                 // 格子宽度\r\n  private cellHeight = 0                // 格子高度\r\n  private startTime = 0                 // 开始时间戳\r\n  private endTime = 0                   // 结束时间戳\r\n  private currIndex = 0                 // 当前index累加\r\n  private stopIndex = 0                 // 刻舟求剑\r\n  private endIndex = 0                  // 停止索引\r\n  private demo = false                  // 是否自动游走\r\n  private timer = 0                     // 游走定时器\r\n  private FPS = 16.6                    // 屏幕刷新率\r\n  /**\r\n   * 中奖索引\r\n   * prizeFlag = undefined 时, 处于开始抽奖阶段, 正常旋转\r\n   * prizeFlag >= 0 时, 说明stop方法被调用, 并且传入了中奖索引\r\n   * prizeFlag === -1 时, 说明stop方法被调用, 并且传入了负值, 本次抽奖无效\r\n   */\r\n  private prizeFlag: number | undefined = -1\r\n  // 所有格子\r\n  private cells: CellType<CellFontType, CellImgType>[] = []\r\n  // 奖品区域几何信息\r\n  private prizeArea: { x: number, y: number, w: number, h: number } | undefined\r\n  // 图片缓存\r\n  private blockImgs: Array<{ defaultImg: ImgObjType }[]> = [[]]\r\n  private btnImgs: Array<{ defaultImg: ImgObjType }[]> = [[]]\r\n  private prizeImgs: Array<{ defaultImg: ImgObjType, activeImg?: ImgObjType }[]> = []\r\n\r\n  /**\r\n   * 九宫格构造器\r\n   * @param config 元素标识\r\n   * @param data 抽奖配置项\r\n   */\r\n  constructor (config: ConfigType, data: LuckyGridConfig = {}) {\r\n    super(config)\r\n    if (config.ob) {\r\n      this.initData(data)\r\n      this.initWatch()\r\n    }\r\n    this.initComputed()\r\n    // 创建前回调函数\r\n    config.beforeCreate?.call(this)\r\n    const btnImgs = this.buttons.map(btn => btn.imgs)\r\n    if (this.button) btnImgs.push(this.button.imgs)\r\n    this.init({\r\n      blockImgs: this.blocks.map(block => block.imgs),\r\n      prizeImgs: this.prizes.map(prize => prize.imgs),\r\n      btnImgs,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 初始化数据\r\n   * @param data\r\n   */\r\n  private initData (data: LuckyGridConfig): void {\r\n    this.$set(this, 'rows', Number(data.rows) || 3)\r\n    this.$set(this, 'cols', Number(data.cols) || 3)\r\n    this.$set(this, 'blocks', data.blocks || [])\r\n    this.$set(this, 'prizes', data.prizes || [])\r\n    this.$set(this, 'buttons', data.buttons || [])\r\n    // 临时过渡代码, 升级到2.x即可删除\r\n    this.$set(this, 'button', data.button)\r\n    this.$set(this, 'defaultConfig', data.defaultConfig || {})\r\n    this.$set(this, 'defaultStyle', data.defaultStyle || {})\r\n    this.$set(this, 'activeStyle', data.activeStyle || {})\r\n    this.$set(this, 'startCallback', data.start)\r\n    this.$set(this, 'endCallback', data.end)\r\n  }\r\n\r\n  /**\r\n   * 初始化属性计算\r\n   */\r\n  private initComputed (): void {\r\n    // 默认配置\r\n    this.$computed(this, '_defaultConfig', () => {\r\n      const config = {\r\n        gutter: 5,\r\n        speed: 20,\r\n        accelerationTime: 2500,\r\n        decelerationTime: 2500,\r\n        ...this.defaultConfig\r\n      }\r\n      config.gutter = this.getLength(config.gutter)\r\n      config.speed = config.speed / 40\r\n      return config\r\n    })\r\n    // 默认样式\r\n    this.$computed(this, '_defaultStyle', () => {\r\n      return {\r\n        borderRadius: 20,\r\n        fontColor: '#000',\r\n        fontSize: '18px',\r\n        fontStyle: 'sans-serif',\r\n        fontWeight: '400',\r\n        background: 'rgba(0,0,0,0)',\r\n        shadow: '',\r\n        wordWrap: true,\r\n        lengthLimit: '90%',\r\n        ...this.defaultStyle\r\n      }\r\n    })\r\n    // 中奖样式\r\n    this.$computed(this, '_activeStyle', () => {\r\n      return {\r\n        background: '#ffce98',\r\n        shadow: '',\r\n        ...this.activeStyle\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 初始化观察者\r\n   */\r\n  private initWatch (): void {\r\n    // 监听 blocks 数据的变化\r\n    this.$watch('blocks', (newData: Array<BlockType>) => {\r\n      return this.init({ blockImgs: newData.map(block => block.imgs) })\r\n    }, { deep: true })\r\n    // 监听 prizes 数据的变化\r\n    this.$watch('prizes', (newData: Array<PrizeType>) => {\r\n      return this.init({ prizeImgs: newData.map(prize => prize.imgs) })\r\n    }, { deep: true })\r\n    // 监听 button 数据的变化\r\n    this.$watch('buttons', (newData: Array<ButtonType>) => {\r\n      const btnImgs = newData.map(btn => btn.imgs)\r\n      if (this.button) btnImgs.push(this.button.imgs)\r\n      return this.init({ btnImgs })\r\n    }, { deep: true })\r\n    // 临时过渡代码, 升级到2.x即可删除\r\n    this.$watch('button', () => {\r\n      const btnImgs = this.buttons.map(btn => btn.imgs)\r\n      if (this.button) btnImgs.push(this.button.imgs)\r\n      return this.init({ btnImgs })\r\n    }, { deep: true })\r\n    this.$watch('rows', () => this.init({}))\r\n    this.$watch('cols', () => this.init({}))\r\n    this.$watch('defaultConfig', () => this.draw(), { deep: true })\r\n    this.$watch('defaultStyle', () => this.draw(), { deep: true })\r\n    this.$watch('activeStyle', () => this.draw(), { deep: true })\r\n    this.$watch('startCallback', () => this.init({}))\r\n    this.$watch('endCallback', () => this.init({}))\r\n  }\r\n\r\n  /**\r\n   * 初始化 canvas 抽奖\r\n   * @param willUpdateImgs 需要更新的图片\r\n   */\r\n  public init (willUpdateImgs: {\r\n    blockImgs?: Array<BlockImgType[] | undefined>,\r\n    prizeImgs?: Array<PrizeImgType[] | undefined>,\r\n    btnImgs?: Array<ButtonImgType[] | undefined>\r\n  }): void {\r\n    super.init()\r\n    const { config, ctx, button } = this\r\n    // 初始化前回调函数\r\n    config.beforeInit?.call(this)\r\n    // 先画一次防止闪烁\r\n    this.draw()\r\n    // 异步加载图片\r\n    Object.keys(willUpdateImgs).forEach(key => {\r\n      const imgName = key as 'blockImgs' | 'prizeImgs' | 'btnImgs'\r\n      const willUpdate = willUpdateImgs[imgName]\r\n      const cellName = {\r\n        blockImgs: 'blocks',\r\n        prizeImgs: 'prizes',\r\n        btnImgs: 'buttons',\r\n      }[imgName] as 'blocks' | 'prizes' | 'buttons'\r\n      willUpdate && willUpdate.forEach((imgs, cellIndex) => {\r\n        imgs && imgs.forEach((imgInfo, imgIndex) => {\r\n          this.loadAndCacheImg(cellName, cellIndex, imgName, imgIndex, () => {\r\n            this.draw()\r\n          })\r\n        })\r\n      })\r\n    })\r\n    // 初始化后回调函数\r\n    config.afterInit?.call(this)\r\n  }\r\n\r\n  /**\r\n   * canvas点击事件\r\n   * @param e 事件参数\r\n   */\r\n  protected handleClick (e: MouseEvent): void {\r\n    const { ctx } = this\r\n    ;[\r\n      ...this.buttons,\r\n      this.button\r\n    ].forEach(btn => {\r\n      if (!btn) return\r\n      const [x, y, width, height] = this.getGeometricProperty([\r\n        btn.x, btn.y, btn.col || 1, btn.row || 1\r\n      ])\r\n      ctx.beginPath()\r\n      ctx.rect(x, y, width, height)\r\n      if (!ctx.isPointInPath(e.offsetX, e.offsetY)) return\r\n      if (this.startTime) return\r\n      // 如果btn里有单独的回调方法, 优先触发\r\n      if (typeof btn.callback === 'function') btn.callback.call(this, btn)\r\n      // 最后触发公共回调\r\n      this.startCallback?.(e, btn)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 根据索引单独加载指定图片并缓存\r\n   * @param { number } prizeIndex 奖品索引\r\n   * @param { number } imgIndex 奖品图片索引\r\n   * @param { Function } callBack 图片加载完毕回调\r\n   */\r\n  private async loadAndCacheImg (\r\n    cellName: 'blocks' | 'prizes' | 'buttons',\r\n    cellIndex: number,\r\n    imgName: 'blockImgs' | 'prizeImgs' | 'btnImgs',\r\n    imgIndex: number,\r\n    callBack: () => void\r\n  ) {\r\n    let cell: BlockType | PrizeType | ButtonType = this[cellName][cellIndex]\r\n    // 临时过渡代码, 升级到2.x即可删除\r\n    if (cellName === 'buttons' && !this.buttons.length && this.button) {\r\n      cell = this.button\r\n    }\r\n    if (!cell || !cell.imgs) return\r\n    const imgInfo = cell.imgs[imgIndex]\r\n    if (!imgInfo) return\r\n    if (!this[imgName][cellIndex]) this[imgName][cellIndex] = []\r\n    // 异步加载图片\r\n    const request = [\r\n      this.loadImg(imgInfo.src, imgInfo),\r\n      imgInfo['activeSrc'] && this.loadImg(imgInfo['activeSrc'], imgInfo, '$activeResolve')\r\n    ]\r\n    Promise.all(request).then(([defaultImg, activeImg]) => {\r\n      this[imgName][cellIndex][imgIndex] = { defaultImg, activeImg } as {\r\n        defaultImg: ImgObjType,\r\n        activeImg?: ImgObjType\r\n      }\r\n      callBack.call(this)\r\n    }).catch(err => {\r\n      console.error(`${cellName}[${cellIndex}].imgs[${imgIndex}] ${err}`)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 计算图片的渲染宽高\r\n   * @param imgObj 图片标签元素\r\n   * @param imgInfo 图片信息\r\n   * @param cell 格子信息\r\n   * @return [渲染宽度, 渲染高度]\r\n   */\r\n  private computedWidthAndHeight (\r\n    imgObj: ImgObjType,\r\n    imgInfo: CellImgType,\r\n    cell: CellType<CellFontType, CellImgType>\r\n  ): [number, number] {\r\n    // 根据配置的样式计算图片的真实宽高\r\n    if (!imgInfo.width && !imgInfo.height) {\r\n      // 如果没有配置宽高, 则使用图片本身的宽高\r\n      return [imgObj.width, imgObj.height]\r\n    } else if (imgInfo.width && !imgInfo.height) {\r\n      // 如果只填写了宽度, 没填写高度\r\n      let trueWidth = this.getWidth(imgInfo.width, cell.col)\r\n      // 那高度就随着宽度进行等比缩放\r\n      return [trueWidth, imgObj.height * (trueWidth / imgObj.width)]\r\n    } else if (!imgInfo.width && imgInfo.height) {\r\n      // 如果只填写了宽度, 没填写高度\r\n      let trueHeight = this.getHeight(imgInfo.height, cell.row)\r\n      // 那宽度就随着高度进行等比缩放\r\n      return [imgObj.width * (trueHeight / imgObj.height), trueHeight]\r\n    }\r\n    // 如果宽度和高度都填写了, 就分别计算\r\n    return [\r\n      this.getWidth(imgInfo.width, cell.col),\r\n      this.getHeight(imgInfo.height, cell.row)\r\n    ]\r\n  }\r\n\r\n  /**\r\n   * 绘制九宫格抽奖\r\n   */\r\n  protected draw (): void {\r\n    const { config, ctx, _defaultConfig, _defaultStyle, _activeStyle } = this\r\n    // 触发绘制前回调\r\n    config.beforeDraw?.call(this, ctx)\r\n    // 清空画布\r\n    ctx.clearRect(0, 0, this.boxWidth, this.boxHeight)\r\n    // 合并奖品和按钮\r\n    this.cells = [\r\n      ...this.prizes,\r\n      ...this.buttons\r\n    ]\r\n    if (this.button) this.cells.push(this.button)\r\n    this.cells.forEach(cell => {\r\n      cell.col = cell.col || 1\r\n      cell.row = cell.row || 1\r\n    })\r\n    // 计算获取奖品区域的几何信息\r\n    this.prizeArea = this.blocks.reduce(({x, y, w, h}, block) => {\r\n      const [paddingTop, paddingBottom, paddingLeft, paddingRight] = computePadding(block)\r\n      const r = block.borderRadius ? this.getLength(block.borderRadius) : 0\r\n      // 绘制边框\r\n      const background = block.background || _defaultStyle.background\r\n      if (hasBackground(background)) {\r\n        drawRoundRect(ctx, x, y, w, h, r, this.handleBackground(x, y, w, h, background))\r\n      }\r\n      return {\r\n        x: x + paddingLeft,\r\n        y: y + paddingTop,\r\n        w: w - paddingLeft - paddingRight,\r\n        h: h - paddingTop - paddingBottom\r\n      }\r\n    }, { x: 0, y: 0, w: this.boxWidth, h: this.boxHeight })\r\n    // 计算单一奖品格子的宽度和高度\r\n    this.cellWidth = (this.prizeArea.w - _defaultConfig.gutter * (this.cols - 1)) / this.cols\r\n    this.cellHeight = (this.prizeArea.h - _defaultConfig.gutter * (this.rows - 1)) / this.rows\r\n    // 绘制所有格子\r\n    this.cells.forEach((cell, cellIndex) => {\r\n      let [x, y, width, height] = this.getGeometricProperty([cell.x, cell.y, cell.col, cell.row])\r\n      // 默认不显示中奖标识\r\n      let isActive = false\r\n      // 只要 prizeFlag 不是负数, 就显示中奖标识\r\n      if (this.prizeFlag === void 0 || this.prizeFlag > -1) {\r\n        isActive = cellIndex === this.currIndex % this.prizes.length >> 0\r\n      }\r\n      // 绘制背景色\r\n      const background = isActive ? _activeStyle.background : (cell.background || _defaultStyle.background)\r\n      if (hasBackground(background)) {\r\n        // 处理阴影 (暂时先用any, 这里后续要优化)\r\n        const shadow: any = (\r\n          isActive ? _activeStyle.shadow! : (cell.shadow || _defaultStyle.shadow!)\r\n        )\r\n          .replace(/px/g, '') // 清空px字符串\r\n          .split(',')[0].split(' ') // 防止有人声明多个阴影, 截取第一个阴影\r\n          .map((n, i) => i < 3 ? Number(n) : n) // 把数组的前三个值*像素比\r\n        // 绘制阴影\r\n        if (shadow.length === 4) {\r\n          ctx.shadowColor = shadow[3]\r\n          ctx.shadowOffsetX = shadow[0] * config.dpr\r\n          ctx.shadowOffsetY = shadow[1] * config.dpr\r\n          ctx.shadowBlur = shadow[2]\r\n          // 修正(格子+阴影)的位置, 这里使用逗号运算符\r\n          shadow[0] > 0 ? (width -= shadow[0]) : (width += shadow[0], x -= shadow[0])\r\n          shadow[1] > 0 ? (height -= shadow[1]) : (height += shadow[1], y -= shadow[1])\r\n        }\r\n        drawRoundRect(\r\n          ctx, x, y, width, height,\r\n          this.getLength(cell.borderRadius ? cell.borderRadius : _defaultStyle.borderRadius),\r\n          this.handleBackground(x, y, width, height, background)\r\n        )\r\n        // 清空阴影\r\n        ctx.shadowColor = 'rgba(0, 0, 0, 0)'\r\n        ctx.shadowOffsetX = 0\r\n        ctx.shadowOffsetY = 0\r\n        ctx.shadowBlur = 0\r\n      }\r\n      // 修正图片缓存\r\n      let cellName = 'prizeImgs'\r\n      if (cellIndex >= this.prizes.length) {\r\n        cellName = 'btnImgs'\r\n        cellIndex -= this.prizes.length\r\n      }\r\n      // 绘制图片\r\n      cell.imgs && cell.imgs.forEach((imgInfo, imgIndex) => {\r\n        if (!this[cellName][cellIndex]) return\r\n        const cellImg = this[cellName][cellIndex][imgIndex]\r\n        if (!cellImg) return\r\n        const renderImg = (isActive && cellImg['activeImg']) || cellImg.defaultImg\r\n        if (!renderImg) return\r\n        const [trueWidth, trueHeight] = this.computedWidthAndHeight(renderImg, imgInfo, cell)\r\n        const [xAxis, yAxis] = [\r\n          x + this.getOffsetX(trueWidth, cell.col),\r\n          y + this.getHeight(imgInfo.top, cell.row)\r\n        ]\r\n        this.drawImage(renderImg, xAxis, yAxis, trueWidth, trueHeight)\r\n      })\r\n      // 绘制文字\r\n      cell.fonts && cell.fonts.forEach(font => {\r\n        // 字体样式\r\n        let style = isActive && _activeStyle.fontStyle\r\n          ? _activeStyle.fontStyle\r\n          : (font.fontStyle || _defaultStyle.fontStyle)\r\n        // 字体加粗\r\n        let fontWeight = isActive && _activeStyle.fontWeight\r\n          ? _activeStyle.fontWeight\r\n          : (font.fontWeight || _defaultStyle.fontWeight)\r\n        // 字体大小\r\n        let size = isActive && _activeStyle.fontSize\r\n          ? this.getLength(_activeStyle.fontSize)\r\n          : this.getLength(font.fontSize || _defaultStyle.fontSize)\r\n        // 字体行高\r\n        const lineHeight = isActive && _activeStyle.lineHeight\r\n          ? _activeStyle.lineHeight\r\n          : font.lineHeight || _defaultStyle.lineHeight || font.fontSize || _defaultStyle.fontSize\r\n        ctx.font = `${fontWeight} ${size >> 0}px ${style}`\r\n        ctx.fillStyle = (isActive && _activeStyle.fontColor) ? _activeStyle.fontColor : (font.fontColor || _defaultStyle.fontColor)\r\n        let lines = [], text = String(font.text)\r\n        // 计算文字换行\r\n        if (Object.prototype.hasOwnProperty.call(font, 'wordWrap') ? font.wordWrap : _defaultStyle.wordWrap) {\r\n          text = removeEnter(text)\r\n          let str = ''\r\n          for (let i = 0; i < text.length; i++) {\r\n            str += text[i]\r\n            let currWidth = ctx.measureText(str).width\r\n            let maxWidth = this.getWidth(font.lengthLimit || _defaultStyle.lengthLimit, cell.col)\r\n            if (currWidth > maxWidth) {\r\n              lines.push(str.slice(0, -1))\r\n              str = text[i]\r\n            }\r\n          }\r\n          if (str) lines.push(str)\r\n          if (!lines.length) lines.push(text)\r\n        } else {\r\n          lines = text.split('\\n')\r\n        }\r\n        lines.forEach((line, lineIndex) => {\r\n          ctx.fillText(\r\n            line,\r\n            x + this.getOffsetX(ctx.measureText(line).width, cell.col),\r\n            y + this.getHeight(font.top, cell.row) + (lineIndex + 1) * this.getLength(lineHeight)\r\n          )\r\n        })\r\n      })\r\n    })\r\n    // 触发绘制后回调\r\n    config.afterDraw?.call(this, ctx)\r\n  }\r\n\r\n  /**\r\n   * 处理背景色\r\n   * @param x\r\n   * @param y\r\n   * @param width\r\n   * @param height\r\n   * @param background\r\n   * @param isActive\r\n   */\r\n  private handleBackground (\r\n    x: number,\r\n    y: number,\r\n    width: number,\r\n    height: number,\r\n    background: string,\r\n  ) {\r\n    const { ctx } = this\r\n    // 处理线性渐变\r\n    if (background.includes('linear-gradient')) {\r\n      background = getLinearGradient(ctx, x, y, width, height, background)\r\n    }\r\n    return background\r\n  }\r\n\r\n  /**\r\n   * 对外暴露: 开始抽奖方法\r\n   */\r\n  public play (): void {\r\n    const { clearInterval } = this.config\r\n    if (this.startTime) return\r\n    clearInterval(this.timer)\r\n    this.startTime = Date.now()\r\n    this.prizeFlag = void 0\r\n    this.run()\r\n  }\r\n\r\n  /**\r\n   * 对外暴露: 缓慢停止方法\r\n   * @param index 中奖索引\r\n   */\r\n  public stop (index: number): void {\r\n    // 判断 prizeFlag 是否等于 -1\r\n    this.prizeFlag = index < 0 ? -1 : index % this.prizes.length\r\n    // 如果是 -1 就初始化状态\r\n    if (this.prizeFlag === -1) {\r\n      this.currIndex = 0\r\n      this.draw()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 实际开始执行方法\r\n   * @param num 记录帧动画执行多少次\r\n   */\r\n  private run (num: number = 0): void {\r\n    const { rAF, currIndex, prizes, prizeFlag, startTime, _defaultConfig } = this\r\n    let interval = Date.now() - startTime\r\n    // 先完全旋转, 再停止\r\n    if (interval >= _defaultConfig.accelerationTime && prizeFlag !== void 0) {\r\n      // 记录帧率\r\n      this.FPS = interval / num\r\n      // 记录开始停止的时间戳\r\n      this.endTime = Date.now()\r\n      // 记录开始停止的索引\r\n      this.stopIndex = currIndex\r\n      // 测算最终停止的索引\r\n      let i = 0\r\n      while (++i) {\r\n        const endIndex = prizes.length * i + prizeFlag - (currIndex >> 0)\r\n        let currSpeed = quad.easeOut(this.FPS, this.stopIndex, endIndex, _defaultConfig.decelerationTime) - this.stopIndex\r\n        if (currSpeed > _defaultConfig.speed) {\r\n          this.endIndex = endIndex\r\n          break\r\n        }\r\n      }\r\n      return this.slowDown()\r\n    }\r\n    this.currIndex = (currIndex + quad.easeIn(interval, 0.1, _defaultConfig.speed, _defaultConfig.accelerationTime)) % prizes.length\r\n    this.draw()\r\n    rAF(this.run.bind(this, num + 1))\r\n  }\r\n\r\n  /**\r\n   * 缓慢停止的方法\r\n   */\r\n  private slowDown (): void {\r\n    const { rAF, prizes, prizeFlag, stopIndex, endIndex, _defaultConfig } = this\r\n    let interval = Date.now() - this.endTime\r\n    // 如果等于 -1 就直接停止游戏\r\n    if (prizeFlag === -1) return (this.startTime = 0, void 0)\r\n    if (interval > _defaultConfig.decelerationTime) {\r\n      this.startTime = 0\r\n      this.endCallback?.({...prizes.find((prize, index) => index === prizeFlag)})\r\n      return\r\n    }\r\n    this.currIndex = quad.easeOut(interval, stopIndex, endIndex, _defaultConfig.decelerationTime) % prizes.length\r\n    this.draw()\r\n    rAF(this.slowDown.bind(this))\r\n  }\r\n\r\n  /**\r\n   * 开启中奖标识自动游走\r\n   */\r\n  public walk (): void {\r\n    const { setInterval, clearInterval } = this.config\r\n    clearInterval(this.timer)\r\n    this.timer = setInterval(() => {\r\n      this.currIndex += 1\r\n      this.draw()\r\n    }, 1300)\r\n  }\r\n\r\n  /**\r\n   * 计算奖品格子的几何属性\r\n   * @param { array } [...矩阵坐标, col, row]\r\n   * @return { array } [...真实坐标, width, height]\r\n   */\r\n  private getGeometricProperty ([x, y, col, row]: number[]) {\r\n    const { cellWidth, cellHeight } = this\r\n    const gutter = this._defaultConfig.gutter\r\n    let res = [\r\n      this.prizeArea!.x + (cellWidth + gutter) * x,\r\n      this.prizeArea!.y + (cellHeight + gutter) * y\r\n    ]\r\n    col && row && res.push(\r\n      cellWidth * col + gutter * (col - 1),\r\n      cellHeight * row + gutter * (row - 1),\r\n    )\r\n    return res\r\n  }\r\n\r\n  /**\r\n   * 转换并获取宽度\r\n   * @param width 将要转换的宽度\r\n   * @param col 横向合并的格子\r\n   * @return 返回相对宽度\r\n   */\r\n  private getWidth (\r\n    width: string | number | undefined,\r\n    col: number = 1\r\n  ): number {\r\n    if (isExpectType(width, 'number')) return (width as number)\r\n    if (isExpectType(width, 'string')) return this.changeUnits(\r\n      width as string,\r\n      this.cellWidth * col + this._defaultConfig.gutter * (col - 1)\r\n    )\r\n    return 0\r\n  }\r\n\r\n  /**\r\n   * 转换并获取高度\r\n   * @param height 将要转换的高度\r\n   * @param row 纵向合并的格子\r\n   * @return 返回相对高度\r\n   */\r\n  private getHeight (\r\n    height: string | number | undefined,\r\n    row: number = 1\r\n  ): number {\r\n    if (isExpectType(height, 'number')) return (height as number)\r\n    if (isExpectType(height, 'string')) return this.changeUnits(\r\n      height as string,\r\n      this.cellHeight * row + this._defaultConfig.gutter * (row - 1)\r\n    )\r\n    return 0\r\n  }\r\n\r\n  /**\r\n   * 获取相对(居中)X坐标\r\n   * @param width\r\n   * @param col\r\n   */\r\n  private getOffsetX (width: number, col = 1): number {\r\n    return (this.cellWidth * col + this._defaultConfig.gutter * (col - 1) - width) / 2\r\n  }\r\n\r\n  /**\r\n   * 换算渲染坐标\r\n   * @param x\r\n   * @param y\r\n   */\r\n  protected conversionAxis (x: number, y: number): [number, number] {\r\n    const { config } = this\r\n    return [x / config.dpr, y / config.dpr]\r\n  }\r\n}\r\n"],"names":["String","prototype","includes","search","start","length","indexOf","Array","find","Object","defineProperty","value","predicate","TypeError","o","len","thisArg","arguments","k","kValue","call"],"mappings":"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"}